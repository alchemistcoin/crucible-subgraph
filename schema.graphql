
type CrucibleEntity @entity {
    id: ID!
    owner: Bytes!            
    timestamp: BigInt!
<<<<<<< HEAD

    index: BigInt
=======
    blockNumber: BigInt!
    index: Int
>>>>>>> 32deb48 (add blockNumber to Crucible entity)

    locks: [Lock!]  @derivedFrom(field: "crucible")

    blockNumber: BigInt!
    txhash: Bytes!
}

type Lock @entity {
    # id = crucibleId-lockID
    id: ID!
    delegate: Bytes!
    token: Bytes!
    balance: BigInt!

    stakesLength: BigInt!
    stakes: [Stake!]! @derivedFrom(field: "lock")

    unstakesLength: BigInt!
    unstakes: [Unstake!]! @derivedFrom(field: "lock")

    crucible: CrucibleEntity!
}

type Stake @entity {
    id: ID!
    amount: BigInt!
    timestamp: BigInt!
    lock: Lock!
}

type Unstake @entity {
    id: ID!
    amount: BigInt!
    duration: BigInt!
    timestamp: BigInt!
    lock: Lock!
}

type Counters @entity {
    id: ID!
    count: BigInt!
}
